var _0x1a4f=["captionUrl","captionData","captionTime","loadXML","prepareData","done","xml","ajax","cuepoints","find","font","attr","size","0x","#","replace","color","css","#caption","name","<div></div>","time","push","each","cuepoint","getAttribute","parentNode","styleForCaption","hasRuby","class=\"ruby\"","","<p style=\'","\' ",">","text","</p>","gaiji_pattern","hasAttribute","drawGaiji","prepend","append","subtitles","subtitle","timeupdate","currentTime","setCaption","addEventListener","seeked","ruby","true","left","top","font-family","font-size","letter-spacing","x","y","letterspacing","width","height","attributes","length","inArray","value","px",":",";","background","substring","opacity","background:rgba(",",",")","background:#","gaiji_width","gaiji_height","canvas","createElement","2d","getContext","getImageData","substr","floor","data","putImageData","abs","reduce","indexOf","html","empty"];function school_caption(url,video){var _this=this;_this[_0x1a4f[0]]= url;_this[_0x1a4f[1]]= false;_this[_0x1a4f[2]]= [];_this[_0x1a4f[3]]= function(){$[_0x1a4f[7]](_this[_0x1a4f[0]],{dataType:_0x1a4f[6]})[_0x1a4f[5]](function(result){_this[_0x1a4f[4]](result,video)})};_this[_0x1a4f[4]]= function(data,_videoObj){var cuepoints=$(data)[_0x1a4f[9]](_0x1a4f[8]);$(_0x1a4f[18])[_0x1a4f[17]]({"font-family":cuepoints[_0x1a4f[11]](_0x1a4f[10]),"font-size":cuepoints[_0x1a4f[11]](_0x1a4f[12]),"color":cuepoints[_0x1a4f[11]](_0x1a4f[16])[_0x1a4f[15]](_0x1a4f[13],_0x1a4f[14])});_this[_0x1a4f[1]]= [];$(cuepoints)[_0x1a4f[9]](_0x1a4f[24])[_0x1a4f[23]](function(){_this[_0x1a4f[1]][$(this)[_0x1a4f[11]](_0x1a4f[19])- 1]= {subtitles:$(_0x1a4f[20])};_this[_0x1a4f[2]][_0x1a4f[22]](Number($(this)[_0x1a4f[11]](_0x1a4f[21])))});$(cuepoints)[_0x1a4f[9]](_0x1a4f[42])[_0x1a4f[23]](function(){var cuepoint=$(this)[0][_0x1a4f[26]][_0x1a4f[25]](_0x1a4f[19])- 1;var style=_this[_0x1a4f[27]]($(this));var ruby=_this[_0x1a4f[28]]($(this))?_0x1a4f[29]:_0x1a4f[30];var img=_0x1a4f[30];var subtitle=$(_0x1a4f[31]+ style+ _0x1a4f[32]+ ruby+ _0x1a4f[33]+ $(this)[_0x1a4f[34]]()+ _0x1a4f[35]);if($(this)[0][_0x1a4f[37]](_0x1a4f[36])){img= _this[_0x1a4f[38]]($(this),cuepoints[_0x1a4f[11]](_0x1a4f[16]));subtitle[_0x1a4f[39]](img)};_this[_0x1a4f[1]][cuepoint][_0x1a4f[41]][_0x1a4f[40]](subtitle)});_videoObj[_0x1a4f[46]](_0x1a4f[43],function(event){_this[_0x1a4f[45]](_videoObj[_0x1a4f[44]],false)});_videoObj[_0x1a4f[46]](_0x1a4f[47],function(event){_this[_0x1a4f[45]](_videoObj[_0x1a4f[44]],true)})};_this[_0x1a4f[28]]= function(subtitle_ele){if(subtitle_ele[_0x1a4f[11]](_0x1a4f[48])&& subtitle_ele[_0x1a4f[11]](_0x1a4f[48])== _0x1a4f[49]){return true}else {return false}};_this[_0x1a4f[27]]= function(subtitle_ele){var style_attr_name={x:_0x1a4f[50],y:_0x1a4f[51],font:_0x1a4f[52],size:_0x1a4f[53],letterspacing:_0x1a4f[54]};var style_attr=[_0x1a4f[55],_0x1a4f[56],_0x1a4f[16],_0x1a4f[57],_0x1a4f[58],_0x1a4f[59],_0x1a4f[12]];var this_attr=subtitle_ele[0][_0x1a4f[60]];var style=_0x1a4f[30];for(var i=0;i< this_attr[_0x1a4f[61]];i++){var name=this_attr[i][_0x1a4f[19]];var value=_0x1a4f[30];if($[_0x1a4f[62]](name,style_attr)!==  -1){value= (name== _0x1a4f[16])?this_attr[i][_0x1a4f[63]][_0x1a4f[15]](_0x1a4f[13],_0x1a4f[14]):this_attr[i][_0x1a4f[63]];if(name== _0x1a4f[55]|| name== _0x1a4f[56]|| name== _0x1a4f[58]|| name== _0x1a4f[59]|| name== _0x1a4f[57]){value= value+ _0x1a4f[64]};style+= (style_attr_name[name]|| name)+ _0x1a4f[65]+ value+ _0x1a4f[66]}};if(subtitle_ele[0][_0x1a4f[37]](_0x1a4f[67])){hex= $(subtitle_ele)[_0x1a4f[11]](_0x1a4f[67])[_0x1a4f[15]](_0x1a4f[13],_0x1a4f[30]);r= parseInt(hex[_0x1a4f[68]](0,2),16);g= parseInt(hex[_0x1a4f[68]](2,4),16);b= parseInt(hex[_0x1a4f[68]](4,6),16);if(subtitle_ele[0][_0x1a4f[37]](_0x1a4f[69])){style+= _0x1a4f[70]+ r+ _0x1a4f[71]+ g+ _0x1a4f[71]+ b+ _0x1a4f[71]+ $(subtitle_ele)[_0x1a4f[11]](_0x1a4f[69])+ _0x1a4f[72]}else {style+= _0x1a4f[73]+ hex}};return style};_this[_0x1a4f[38]]= function(subtitle_ele,default_color){var gaiji_string=$(subtitle_ele)[_0x1a4f[11]](_0x1a4f[36]);var gaiji_width=$(subtitle_ele)[_0x1a4f[11]](_0x1a4f[74]);var gaiji_height=$(subtitle_ele)[_0x1a4f[11]](_0x1a4f[75]);var gaiji_color=$(subtitle_ele)[_0x1a4f[11]](_0x1a4f[16])|| default_color;var cnt=gaiji_width* gaiji_height;var canvas=document[_0x1a4f[77]](_0x1a4f[76]);canvas[_0x1a4f[58]]= gaiji_width;canvas[_0x1a4f[59]]= gaiji_height;var ctx=canvas[_0x1a4f[79]](_0x1a4f[78]);var imgData=ctx[_0x1a4f[80]](0,0,gaiji_width,gaiji_height);var i,j=0;var gaiji_ByteArray_data=[];for(i= 0;i< gaiji_string[_0x1a4f[61]];i++){if(i% 2!= 0){gaiji_ByteArray_data[j]+= parseInt(gaiji_string[_0x1a4f[81]](i,1),16);j++}else {gaiji_ByteArray_data[j]= parseInt(gaiji_string[_0x1a4f[81]](i,1),16)* 0x10}};i= j= 0;for(i= 0;i< cnt;i++){a= Math[_0x1a4f[82]](i/ 8);b= i% 8;if((gaiji_ByteArray_data[a]<< b)& 0x80){imgData[_0x1a4f[83]][j]= parseInt(gaiji_color[_0x1a4f[81]](2,2),16);imgData[_0x1a4f[83]][j+ 1]= parseInt(gaiji_color[_0x1a4f[81]](4,2),16);imgData[_0x1a4f[83]][j+ 2]= parseInt(gaiji_color[_0x1a4f[81]](6,2),16);imgData[_0x1a4f[83]][j+ 3]= 255}else {imgData[_0x1a4f[83]][j]= 0;imgData[_0x1a4f[83]][j+ 1]= 0;imgData[_0x1a4f[83]][j+ 2]= 0;imgData[_0x1a4f[83]][j+ 3]= 0};j+= 4};ctx[_0x1a4f[84]](imgData,0,0);return canvas};var closest=0;_this[_0x1a4f[45]]= function(curr_time,seeked){var _closest=_this[_0x1a4f[2]][_0x1a4f[86]](function(prev,curr){return (Math[_0x1a4f[85]](curr- curr_time)<= Math[_0x1a4f[85]](prev- curr_time)?curr:prev)});var f=curr_time>= _closest;if(seeked){f= true};if(closest!= _closest&& f){closest= _closest;var subtitle=_this[_0x1a4f[1]][_this[_0x1a4f[2]][_0x1a4f[87]](closest)][_0x1a4f[41]];$(_0x1a4f[18])[_0x1a4f[89]]()[_0x1a4f[88]](subtitle)}};_this[_0x1a4f[3]]()}